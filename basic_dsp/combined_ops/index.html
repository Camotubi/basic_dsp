<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `combined_ops` mod in crate `basic_dsp`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, combined_ops">

    <title>basic_dsp::combined_ops - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../main.css">
    

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'><a href='../index.html'>basic_dsp</a></p><script>window.sidebarCurrent = {name: 'combined_ops', ty: 'mod', relpath: '../'};</script><script defer src="../sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content mod">
<h1 class='fqn'><span class='in-band'>Module <a href='../index.html'>basic_dsp</a>::<wbr><a class='mod' href=''>combined_ops</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a id='src-15608' class='srclink' href='../../src/basic_dsp/src/combined_ops.rs.html#1-67' title='goto source code'>[src]</a></span></h1>
<div class='docblock'><p>This module allows to combine certain operations into one operation. Since one
 many machines the speed of many DSP operations is limited by the memory bus speed
 this approach may result in better register and cache usage and thus decrease
 the pressure on the memory bus. As with all performance hints remember 
 rule number 1: Benchmark your code. This is especially true at this very early 
 state of the library.</p>

<p>With this approach we change how we operate on vectors. If you perform
 <code>M</code> operations on a vector with the length <code>N</code> you iterate wit hall other methods like this:</p>

<pre class='rust rust-example-rendered'>
 <span class='comment'>// pseudocode:</span>
 <span class='comment'>// for m in M:</span>
 <span class='comment'>//  for n in N:</span>
 <span class='comment'>//    execute m on n</span></pre>

<p>with this method the pattern is changed slightly:</p>

<pre class='rust rust-example-rendered'>
 <span class='comment'>// pseudocode:</span>
 <span class='comment'>// for n in N:</span>
 <span class='comment'>//  for m in M:</span>
 <span class='comment'>//    execute m on n</span></pre>

<p>Both variants have the same complexity however the second one is beneficial since we
 have increased locality this way. This should help us by making better use of registers and 
 CPU caches.</p>

<p>Only operations can be combined where the result of every element in the vector
 is independent from any other element in the vector.</p>

<p># Examples</p>

<pre class='rust rust-example-rendered'>
 <span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>f32</span>::<span class='ident'>consts</span>::<span class='ident'>PI</span>;
 <span class='kw'>use</span> <span class='ident'>basic_dsp</span>::<span class='op'>*</span>;
 <span class='kw'>use</span> <span class='ident'>basic_dsp</span>::<span class='ident'>combined_ops</span>::<span class='op'>*</span>;
 <span class='kw'>let</span> <span class='ident'>a</span> <span class='op'>=</span> <span class='ident'>RealTimeVector32</span>::<span class='ident'>from_array</span>(<span class='kw-2'>&amp;</span>[<span class='number'>0.1</span>, <span class='number'>0.2</span>, <span class='number'>0.3</span>, <span class='number'>0.4</span>, <span class='number'>0.5</span>, <span class='number'>0.6</span>, <span class='number'>0.7</span>, <span class='number'>0.8</span>]);
 <span class='kw'>let</span> <span class='ident'>b</span> <span class='op'>=</span> <span class='ident'>RealTimeVector32</span>::<span class='ident'>from_constant</span>(<span class='number'>0.0</span>, <span class='number'>8</span>);
 <span class='kw'>let</span> <span class='ident'>ops</span> <span class='op'>=</span> <span class='ident'>multi_ops2</span>(<span class='ident'>a</span>, <span class='ident'>b</span>);
 <span class='kw'>let</span> <span class='ident'>ops</span> <span class='op'>=</span> <span class='ident'>ops</span>.<span class='ident'>add_ops</span>(<span class='op'>|</span><span class='ident'>a</span>, <span class='ident'>b</span><span class='op'>|</span> {
     <span class='kw'>let</span> <span class='ident'>a</span> <span class='op'>=</span> <span class='ident'>a</span>.<span class='ident'>scale</span>(<span class='number'>2.0</span> <span class='op'>*</span> <span class='ident'>PI</span>);
     <span class='kw'>let</span> <span class='ident'>b</span> <span class='op'>=</span> <span class='ident'>b</span>.<span class='ident'>clone_from</span>(<span class='kw-2'>&amp;</span><span class='ident'>a</span>);
     <span class='kw'>let</span> <span class='ident'>a</span> <span class='op'>=</span> <span class='ident'>a</span>.<span class='ident'>sin</span>();
     <span class='kw'>let</span> <span class='ident'>b</span> <span class='op'>=</span> <span class='ident'>b</span>.<span class='ident'>cos</span>();
     <span class='kw'>let</span> <span class='ident'>a</span> <span class='op'>=</span> <span class='ident'>a</span>.<span class='ident'>multiply_vector</span>(<span class='kw-2'>&amp;</span><span class='ident'>b</span>).<span class='ident'>abs</span>();
     <span class='kw'>let</span> <span class='ident'>a_db</span> <span class='op'>=</span> <span class='ident'>a</span>.<span class='ident'>log</span>(<span class='number'>10.0</span>).<span class='ident'>scale</span>(<span class='number'>10.0</span>);
     (<span class='ident'>a_db</span>, <span class='ident'>b</span>)
 });
 <span class='kw'>let</span> (<span class='ident'>a</span>, <span class='ident'>b</span>) <span class='op'>=</span> <span class='ident'>ops</span>.<span class='ident'>get</span>().<span class='ident'>expect</span>(<span class='string'>&quot;Ignoring error handling in examples&quot;</span>);
 <span class='ident'>close</span>(<span class='kw-2'>&amp;</span>[<span class='number'>0.80902</span>, <span class='number'>0.30902</span>, <span class='op'>-</span><span class='number'>0.30902</span>, <span class='op'>-</span><span class='number'>0.80902</span>, <span class='op'>-</span><span class='number'>1.00000</span>, <span class='op'>-</span><span class='number'>0.80902</span>, <span class='op'>-</span><span class='number'>0.30902</span>, <span class='number'>0.30902</span>], <span class='ident'>b</span>.<span class='ident'>data</span>());
 <span class='ident'>close</span>(<span class='kw-2'>&amp;</span>[<span class='op'>-</span><span class='number'>3.2282</span>, <span class='op'>-</span><span class='number'>5.3181</span>, <span class='op'>-</span><span class='number'>5.3181</span>, <span class='op'>-</span><span class='number'>3.2282</span>, <span class='op'>-</span><span class='number'>159.1199</span>, <span class='op'>-</span><span class='number'>3.2282</span>, <span class='op'>-</span><span class='number'>5.3181</span>, <span class='op'>-</span><span class='number'>5.3181</span>], <span class='ident'>a</span>.<span class='ident'>data</span>());</pre>
</div><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.ComplexFreqIdentifier.html'
                                  title='basic_dsp::combined_ops::ComplexFreqIdentifier'>ComplexFreqIdentifier</a></td>
                           <td class='docblock short'>
                                <p>Placeholder for a concrete vector.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.ComplexTimeIdentifier.html'
                                  title='basic_dsp::combined_ops::ComplexTimeIdentifier'>ComplexTimeIdentifier</a></td>
                           <td class='docblock short'>
                                <p>Placeholder for a concrete vector.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.GenericDataIdentifier.html'
                                  title='basic_dsp::combined_ops::GenericDataIdentifier'>GenericDataIdentifier</a></td>
                           <td class='docblock short'>
                                <p>Placeholder for a concrete vector.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.MultiOperation1.html'
                                  title='basic_dsp::combined_ops::MultiOperation1'>MultiOperation1</a></td>
                           <td class='docblock short'>
                                <p>A multi operation which holds a vector and records all changes
which need to be done to the vectors. By calling <code>get</code> on the struct
all operations will be executed in one run.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.MultiOperation2.html'
                                  title='basic_dsp::combined_ops::MultiOperation2'>MultiOperation2</a></td>
                           <td class='docblock short'>
                                <p>A multi operation which holds two vectors and records all changes
which need to be done to the vectors. By calling <code>get</code> on the struct
all operations will be executed in one run.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.PreparedOperation1.html'
                                  title='basic_dsp::combined_ops::PreparedOperation1'>PreparedOperation1</a></td>
                           <td class='docblock short'>
                                <p>An operation on one data vector which has been prepared in
advance.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.PreparedOperation2.html'
                                  title='basic_dsp::combined_ops::PreparedOperation2'>PreparedOperation2</a></td>
                           <td class='docblock short'>
                                <p>An operation on two data vectors which has been prepared in
advance.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.RealFreqIdentifier.html'
                                  title='basic_dsp::combined_ops::RealFreqIdentifier'>RealFreqIdentifier</a></td>
                           <td class='docblock short'>
                                <p>Placeholder for a concrete vector.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.RealTimeIdentifier.html'
                                  title='basic_dsp::combined_ops::RealTimeIdentifier'>RealTimeIdentifier</a></td>
                           <td class='docblock short'>
                                <p>Placeholder for a concrete vector.</p>
                           </td>
                       </tr></table><h2 id='enums' class='section-header'><a href="#enums">Enums</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class='enum' href='enum.Operation.html'
                                  title='basic_dsp::combined_ops::Operation'>Operation</a></td>
                           <td class='docblock short'>
                                <p>An alternative way to define operations on a vector.</p>
                           </td>
                       </tr></table><h2 id='traits' class='section-header'><a href="#traits">Traits</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class='trait' href='trait.ComplexIdentifier.html'
                                  title='basic_dsp::combined_ops::ComplexIdentifier'>ComplexIdentifier</a></td>
                           <td class='docblock short'>
                                <p>Operations for complex vectors which can be used in combination
with multi ops or prepared ops. For a documentation of the specific operations
see <a href="../trait.ComplexVectorOps.html"><code>ComplexVectorOps</code></a>.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='trait' href='trait.GeneralIdentifier.html'
                                  title='basic_dsp::combined_ops::GeneralIdentifier'>GeneralIdentifier</a></td>
                           <td class='docblock short'>
                                <p>Operations for all kind of vectors which can be used in combination
with multi ops or prepared ops. For a documentation of the specific operations
see <a href="../trait.GenericVectorOps.html"><code>GenericVectorOps</code></a>.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='trait' href='trait.Identifier.html'
                                  title='basic_dsp::combined_ops::Identifier'>Identifier</a></td>
                           <td class='docblock short'>
                                <p>An identifier is just a placeholder for a vector
used to ensure already at compile time that operations are valid.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='trait' href='trait.IdentifierIter.html'
                                  title='basic_dsp::combined_ops::IdentifierIter'>IdentifierIter</a></td>
                           <td class='docblock short'>
                                <p>Allows to map every vector element.
with multi ops or prepared ops. For a documentation of the specific operations
see <a href="../trait.VectorIter.html"><code>VectorIter</code></a>.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='trait' href='trait.Offset.html'
                                  title='basic_dsp::combined_ops::Offset'>Offset</a></td>
                           <td class='docblock short'>
                                <p>Offset operations to vectors in combination
with multi ops or prepared ops. For a documentation of the specific operations
see <a href="../trait.Offset.html"><code>Offset</code></a>.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='trait' href='trait.RealIdentifier.html'
                                  title='basic_dsp::combined_ops::RealIdentifier'>RealIdentifier</a></td>
                           <td class='docblock short'>
                                <p>Operations for real vectors which can be used on combination
with multi ops or prepared ops. For a documentation of the specific operations
see <a href="../trait.RealVectorOps.html"><code>RealVectorOps</code></a>.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='trait' href='trait.Scale.html'
                                  title='basic_dsp::combined_ops::Scale'>Scale</a></td>
                           <td class='docblock short'>
                                <p>Scale operations to vectors in combination
with multi ops or prepared ops. For a documentation of the specific operations
see <a href="../trait.Scale.html"><code>Scale</code></a>.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='trait' href='trait.ToIdentifier.html'
                                  title='basic_dsp::combined_ops::ToIdentifier'>ToIdentifier</a></td>
                           <td class='docblock short'>
                                <p>Trait which defines the relation between a vector
and an identifier. </p>
                           </td>
                       </tr></table><h2 id='functions' class='section-header'><a href="#functions">Functions</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class='fn' href='fn.multi_ops1.html'
                                  title='basic_dsp::combined_ops::multi_ops1'>multi_ops1</a></td>
                           <td class='docblock short'>
                                <p>Creates a new multi operation for one vectors.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='fn' href='fn.multi_ops2.html'
                                  title='basic_dsp::combined_ops::multi_ops2'>multi_ops2</a></td>
                           <td class='docblock short'>
                                <p>Creates a new multi operation for two vectors.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='fn' href='fn.prepare1.html'
                                  title='basic_dsp::combined_ops::prepare1'>prepare1</a></td>
                           <td class='docblock short'>
                                <p>Prepares an operation with one input and one output.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='fn' href='fn.prepare2.html'
                                  title='basic_dsp::combined_ops::prepare2'>prepare2</a></td>
                           <td class='docblock short'>
                                <p>Prepares an operation with two inputs and two outputs.</p>
                           </td>
                       </tr></table></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../";
        window.currentCrate = "basic_dsp";
        window.playgroundUrl = "";
    </script>
    <script src="../../jquery.js"></script>
    <script src="../../main.js"></script>
    
    <script defer src="../../search-index.js"></script>
</body>
</html>